<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<title>CR and LF remover</title>
<style>
.form-table {
  display: flex;
  flex-wrap: wrap;
}
.form-elem {
  font-size: 15pt;
  width: 40em;
  height: 30em;
}
#textNonLF {
  background-color: gainsboro;
}
button {
  font-size: 30px;
  float: right;
}
</style>
</head>
<body>
  <div id="main">
  <form name="form">
    <div class="form-table">
      <textarea class="form-elem" id="textWithLF" name="textWithLF" autofocus></textarea>
      <textarea class="form-elem" id="textNonLF" name="textNonLF" readonly></textarea><br/>
    </div>
  </form>
  <button id="select-all">Select All</button>
  <button id="copy">Copy</button>
  <button id="delete">Delete</button>
  </div>
  <div id="shortcuts">
    ショートカットキー Shorcuts<br/>
    ⌘A / Ctrl-A : 全選択 Select All<br/>
    ⌘C / Ctrl-C : コピー Copy<br/>
    ⌘K / Ctrl-K : 削除 Delete<br/>
  </div>
  <div id="about-deepl">
  DeepLのアドオンを入れている場合は、⇧⌘Yで翻訳可能。
  If you use the add-on from DeepL, you can translate the text with ⇧⌘Y.
  </div>
  <script>
  document.querySelector("#textWithLF").addEventListener("input", () => {
    document.getElementById('textNonLF').value = document.getElementById('textWithLF').value.replaceAll('\r', '').replaceAll('\n', ' ');
  });

  document.querySelector("#copy").addEventListener("click", () => {
    navigator.clipboard.writeText(document.getElementById('textNonLF').value);
  });

  document.querySelector("#select-all").addEventListener("click", () => {
    document.form.textNonLF.focus();
    document.form.textNonLF.select();
  });

  document.querySelector("#delete").addEventListener("click", () => {
    document.getElementById('textWithLF').value = '';
  });

  document.querySelector("html").addEventListener("keydown", (e) => {
    if(e.ctrlKey || e.metaKey){
      switch(e.code){
        case 'KeyA':
          document.querySelector("#select-all").click();
          break;
        case 'KeyC':
          document.querySelector("#copy").click();
          break;
        case 'KeyK':
          document.querySelector("#delete").click();
          break;
        default:
          break;
      }
    }
  });
  </script>
</body>
</html>
